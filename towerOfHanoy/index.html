<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
      function moveTower(number) {
      if (number == towerRings) {
        if (move3) {
          mainArray[count % 3].push(number)
          if (number % 2 == 0) {
            count--;
          } else {
            count++;
          }

        } else if (number % 2 != 0) {
          console.log("check")
          if (mainArray[(count + 1) % 3].length == 0) {
            mainArray[(count + 1) % 3].push(number)//אי זוגי קדימה
            move3 = true;
            steps++;
            console.log("if")
          } else {
            console.log("else")
            mainArray[count % 3].push(number)
            count++;
          }
        } else if (number % 2 == 0) {
          if (mainArray[(count + 2) % 3].length == 0) {
            mainArray[(count + 2) % 3].push(number)//אי זוגי קדימה
            move3 = true;
            steps++;
          } else {
            mainArray[count % 3].push(number)
            count++;
          }
        }
        return;
      }
      if (number % 2 == 0) {
        if (mainArray[(count + 2) % 3][mainArray[(count + 2) % 3].length - 1] > number || mainArray[(count + 2) % 3].length == 0) {
          mainArray[(count + 2) % 3].push(number)//זוגי אחורה
          steps++;
          return;
        }
        else {
          mainArray[count % 3].push(number);
          count++;
        }
      }
      else {
        if (mainArray[(count + 1) % 3][mainArray[(count + 1) % 3].length - 1] > number || mainArray[(count + 1) % 3].length == 0) {
          mainArray[(count + 1) % 3].push(number)//אי זוגי קדימה
          steps++;
          return;
        }
        else {
          mainArray[count % 3].push(number);
          count++;
        }
      }
    }
    let mainArray = [[], [], []];
    let towerRings = + prompt("How Many Rings?")
    for (let i = towerRings; i > 0; i--) {
      mainArray[0].push(i);
    }
    let move3 = false;
    let count = 0;
    let i = 0;
    let steps = 0;
    while (mainArray[1].length!=towerRings && mainArray[2].length!=towerRings) {
      if (mainArray[count % 3].length > 0) {
        moveTower(mainArray[count % 3].pop())
      } else if (count % 3 == 1 || count % 2 == 2) {
        count = 0;
      }
      else {
        count++;
      }
      i++;
    }
    console.log(`tower = ${count % 3}`)
    console.log(mainArray);
    console.log(`Steps = ${steps}`)
  </script>
</body>

</html>